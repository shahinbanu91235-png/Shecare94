<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Route Finder | SheCare</title>
    
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

    <link rel="stylesheet" href="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.css" />
    <script src="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.js"></script>

    <link rel="stylesheet" href="https://unpkg.com/leaflet-routing-machine@3.2.12/dist/leaflet-routing-machine.css" />
    <script src="https://unpkg.com/leaflet-routing-machine@3.2.12/dist/leaflet-routing-machine.js"></script>

    <style>
        body { margin: 0; font-family: 'Segoe UI', sans-serif; }
        #map { height: 100vh; width: 100%; }

        /* Header UI matching your Dashboard */
        .header {
            position: absolute;
            top: 0; left: 0; right: 0;
            z-index: 1000;
            background: #d4217d;
            color: white;
            padding: 10px 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
        }

        .back-btn {
            background: white;
            color: #d4217d;
            border: none;
            padding: 5px 15px;
            border-radius: 5px;
            text-decoration: none;
            font-weight: bold;
            font-size: 14px;
        }

        /* Customizing the Routing Panel to match Pink theme */
        .leaflet-routing-container {
            background-color: white !important;
            border: 2px solid #d4217d !important;
            color: #333 !important;
            border-radius: 10px;
            font-size: 12px;
        }

        .leaflet-routing-alt {
            max-height: 200px;
        }
    </style>
</head>
<body>

    <div class="header">
        <a href="dashboard.html" class="back-btn">← Back</a>
        <span>SheCare Route Finder (India)</span>
        <div style="width: 50px;"></div>
    </div>

    <div id="map"></div>

    <script>
        // 1. Initialize the map centered on India
        var map = L.map('map').setView([20.5937, 78.9629], 5);

        // 2. Add OpenStreetMap Tiles
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '© OpenStreetMap contributors'
        }).addTo(map);

        // 3. Add Search Bar (Top Right)
        var geocoder = L.Control.geocoder({
            defaultMarkGeocode: false,
            placeholder: "Search location in India..."
        })
        .on('markgeocode', function(e) {
            var latlng = e.geocode.center;
            L.marker(latlng).addTo(map).bindPopup(e.geocode.name).openPopup();
            map.setView(latlng, 15);
        })
        .addTo(map);

        // 4. Add Routing Engine
        // This will allow you to click two points on the map to see the route
        var routingControl = L.Routing.control({
            waypoints: [
                L.latLng(13.0827, 80.2707), // Chennai (Default Start)
                L.latLng(12.9716, 77.5946)  // Bangalore (Default End)
            ],
            routeWhileDragging: true,
            geocoder: L.Control.Geocoder.nominatim(),
            lineOptions: {
                styles: [{ color: '#d4217d', weight: 6 }] // SheCare Pink Route Line
            }
        }).addTo(map);

        // 5. Function to update route based on search (Optional helper)
        function findRouteTo(destinationName) {
            L.Control.Geocoder.nominatim().geocode(destinationName, function(results) {
                if (results.length > 0) {
                    var dest = results[0].center;
                    routingControl.spliceWaypoints(routingControl.getWaypoints().length - 1, 1, dest);
                }
            });
        }
    </script>
</body>
</html>

